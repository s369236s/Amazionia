(()=>{"use strict";class e{constructor(e){this.element=new Image,this.element.src=e}}class t{constructor(t,s,i){this.image=new e(i),this.pos=[t,s]}render(e){e.drawImage(this.image.element,this.pos[0],this.pos[1])}}class s{constructor(){s.clickPos=[0,0],s.mousemovePos=[0,0]}clickListener(e){e.addEventListener("click",(t=>{s.clickPos=[t.clientX-e.getBoundingClientRect().left,t.clientY-e.getBoundingClientRect().top];const[i,o]=s.clickPos;console.log(`${Math.floor(i)},${Math.floor(o)}`)}))}mouseoverListener(e){e.addEventListener("mousemove",(t=>{s.mousemovePos[0]=t.clientX-e.getBoundingClientRect().left,s.mousemovePos[1]=t.clientY-e.getBoundingClientRect().top}))}}class i{}i.current=0,i.menu=0,i.home=1,i.map=2,i.river=3,i.jungle=4,i.waterfall=5;const o={current:0,none:0,inGame:1,end:2};class r{constructor(t,s,i,o=!1,r="",h=!1,n=99,a=!1){this.image=new e(i),this.imageURL=i,this.image.element.src=i,this.isHoverAble=o,this.isChangeSenceAble=h,this.gotoSence=n,this.imageHoverURL=r,this.pos=[t,s],this._b=a}render(e){e.drawImage(this.image.element,this.pos[0]-this.image.element.width/2,this.pos[1]-this.image.element.height/2),this.isHoverAble&&(s.mousemovePos[0]>this.pos[0]-this.image.element.width/2&&s.mousemovePos[1]>this.pos[1]-this.image.element.height/2&&s.mousemovePos[0]<this.pos[0]+this.image.element.width/2&&s.mousemovePos[1]<this.pos[1]+this.image.element.height/2?this.image.element.src=this.imageHoverURL:this.image.element.src=this.imageURL),this.isChangeSenceAble&&s.clickPos[0]>this.pos[0]-this.image.element.width/2&&s.clickPos[1]>this.pos[1]-this.image.element.height/2&&s.clickPos[0]<this.pos[0]+this.image.element.width/2&&s.clickPos[1]<this.pos[1]+this.image.element.height/2&&(i.current=this.gotoSence,this._b&&(o.current=o.inGame),s.clickPos=[0,0])}}class h{constructor(){this.background=new t(0,0,"./Media/Image/Backgrounds/menu.png"),this.startButton=new r(Ie.width/2,Ie.height/2,"./Media/Image/UI/Button/New-Game-Button.png",!0,"./Media/Image/UI/Button/New-Game-Button-Hover.png",!0,1,!0)}render(e){this.background.render(e),this.startButton.render(e)}}class n{}n.health=100,n.hunger=100,n.mentality=100,n.thirsty=100,n.mentalityRate=0;class a{constructor(t,s,i,o,r,h){this.pos=[t,s],this.imageURL=i,this.attrValue=o,this.isHoverAble=r,this.imageHoverURL=h,this.image=new e(i)}render(e,t=0){e.drawImage(this.image.element,this.pos[0]-this.image.element.width/2,this.pos[1]-this.image.element.height/2),e.fillStyle="white",e.font="16px Poppins",e.textAlign="center",e.fillText(t.toString(),this.image.element.width+this.pos[0]-this.image.element.width/2+15,60),this.isHoverAble&&(s.mousemovePos[0]>this.pos[0]-this.image.element.width/2&&s.mousemovePos[1]>this.pos[1]-this.image.element.height/2&&s.mousemovePos[0]<this.pos[0]+this.image.element.width/2&&s.mousemovePos[1]<this.pos[1]+this.image.element.height/2?this.image.element.src=this.imageHoverURL:this.image.element.src=this.imageURL)}}class l{constructor(){this.health=new a(30,60,"./Media/Image/UI/Attr/health.png",Math.floor(n.health),!0,"./Media/Image/UI/Attr/health-hover.png"),this.hunger=new a(100,60,"./Media/Image/UI/Attr/hunger.png",Math.floor(n.hunger),!0,"./Media/Image/UI/Attr/hunger-hover.png"),this.thirsty=new a(170,60,"./Media/Image/UI/Attr/thirsty.png",Math.floor(n.thirsty),!0,"./Media/Image/UI/Attr/thirsty-hover.png"),this.mentality=new a(240,60,"./Media/Image/UI/Attr/mentality.png",Math.floor(n.mentality),!0,"./Media/Image/UI/Attr/mentality-hover.png")}render(e){this.health.render(e,Math.floor(n.health)),this.hunger.render(e,Math.floor(n.hunger)),this.thirsty.render(e,Math.floor(n.thirsty)),this.mentality.render(e,Math.floor(n.mentality))}}class c{}c.day=0,c.minute=1430;class m{constructor(){this.pos=[0,0],this.day=c.day,this.hour=Math.floor(c.minute%525600%1440/60),this.minute=Math.floor(c.minute%525600%1440%60/24)}secondsToString(e){return this.hour=Math.floor(e%525600%1440/60),this.minute=Math.floor(e%525600%1440%60),`${this.hour<10?`0${this.hour.toString()}`:this.hour.toString()}:${this.minute<10?`0${this.minute.toString()}`:this.minute.toString()} `}render(e){e.save(),e.fillStyle="#47defc",e.font="600 30px digital",e.textAlign="center",e.fillText(this.secondsToString(c.minute),350,65),e.restore(),e.save(),e.fillStyle="white",e.font="15px Poppins",e.textAlign="center",e.fillText(`Day : ${c.day.toString()}`,367.5,80),e.restore()}}class g{}g.current=0,g.none=0,g.guide=1,g.bag=2,g.tent=3,g.fire=4,g.item=100;class p{constructor(t=[50,150],s="./Media/Image/UI/Panel.png",i=[320,175]){this.xImageURL="./Media/Image/UI/x.png",this.pos=[t[0],t[1]],this.imageURL=s,this.image=new e(s),this.customXPos=i,this.xButton=new q(i[0],i[1],this.xImageURL,!0,"",!0,g.none,!1,void 0,"x")}render(e){e.drawImage(this.image.element,this.pos[0],this.pos[1]),this.xButton.render(e)}}class u{}u.current=1,u.maxPage=4;class d{constructor(t,s,i,o="",r=!1,h=[0,0,0,0],n=10){this.amount=1,this.text=o,this.consumable=r,this.attrValue=h,this.name=t,this.imageURL=s,this.ID=i,this.maxAmount=n,this.image=new e(s)}}class P{constructor(){this.items=[],this.items.push(new d("Banana","./Media/Image/Items/Banana.png",k.food.banana,"A Banana",!0,[0,10,5,0])),this.items.push(new d("Coconut","./Media/Image/Items/Coconut.png",k.food.coconut,"A Coconut",!0,[0,10,20,0])),this.items.push(new d("Berry","./Media/Image/Items/Berry.png",k.food.berry,"A Berry",!0,[0,5,5,0])),this.items.push(new d("Fish","./Media/Image/Items/Fish.png",k.food.fish,"A Fish",!0,[0,5,5,0])),this.items.push(new d("Spider","./Media/Image/Items/spider.png",k.food.spider,"Look gross...",!0,[5,5,0,-20],10)),this.items.push(new d("Snail","./Media/Image/Items/snail.png",k.food.snail,"Feel sticky",!0,[0,0,0,-5],10))}}class w{constructor(){this.items=[],this.items.push(new d("Cooked Fish","./Media/Image/Items/fish-cooked.png",k.cooked_Food.fish_Cooked,"Protein rich...",!0,[15,25,0,10],10)),this.items.push(new d("Cooked Spider","./Media/Image/Items/spider-cooked.png",k.cooked_Food.spider_Cooked,"Protein rich...",!0,[10,10,0,-5],10)),this.items.push(new d("Cooked Snail","./Media/Image/Items/Snail_Cooked.png",k.cooked_Food.snail_Cooked,"Frech Delicacy",!0,[10,10,0,5],10))}}class f{constructor(){this.items=[],this.items.push(new d("Stick","./Media/Image/Items/stick.png",k.material.stick,"Plenty in forest",!1,void 0,30)),this.items.push(new d("Rock","./Media/Image/Items/rock.png",k.material.rock,"Plenty in forest",!1,void 0,30))}}class I{constructor(){this.items=[],this.items.push(new d("Passport","./Media/Image/Items/Passport.png",k.tool.passport,"My Passport",!1,void 0,1)),this.items.push(new d("Passport","./Media/Image/Items/axe.png",k.tool.axe,"Axe",!1,void 0,1)),this.items.push(new d("Passport","./Media/Image/Items/spear.png",k.tool.spear,"Spear",!1,void 0,1))}}class v{constructor(){this.items=[],this.raw_food_items=new P,this.tool_items=new I,this.cooked_food_items=new w,this.materail=new f;for(const e in this.raw_food_items.items)this.items.push(this.raw_food_items.items[e]);for(const e in this.tool_items.items)this.items.push(this.tool_items.items[e]);for(const e in this.cooked_food_items.items)this.items.push(this.cooked_food_items.items[e]);for(const e in this.materail.items)this.items.push(this.materail.items[e])}}const k={food:{banana:1,coconut:2,berry:3,fish:4,spider:11,snail:12},cooked_Food:{fish_Cooked:51,spider_Cooked:61,snail_Cooked:62},material:{stick:101,rock:102},tool:{passport:151,spear:161,axe:162}};class y{constructor(){this.items=[],this.itemList=new v;for(const e in this.itemList.items)this.items.push(this.itemList.items[e])}findOne(e){return this.items.find((t=>t.ID===e))}Debug(){const e=this.items.find((e=>"Passport"===e.name));console.table(this.items),console.table(e)}}class x{constructor(t,s,i=!1,o=0){this.isPreview=i,this.amount=o,this.item=s,this.pos=t,this.image=new e(s.imageURL)}render(e){e.save(),e.fillStyle="rgba(0, 0, 0, 0.411)",e.fillRect(this.pos[0],this.pos[1],50,50),$.current===$.none&&(s.mousemovePos[0]>this.pos[0]&&s.mousemovePos[1]>this.pos[1]&&s.mousemovePos[0]<this.pos[0]+50&&s.mousemovePos[1]<this.pos[1]+50?e.globalAlpha=.7:e.globalAlpha=1,s.clickPos[0]>this.pos[0]&&s.clickPos[1]>this.pos[1]&&s.clickPos[0]<this.pos[0]+50&&s.clickPos[1]<this.pos[1]+50&&($.current=$.opened,$.item=this.item,s.clickPos=[0,0])),e.drawImage(this.image.element,this.pos[0]+5,this.pos[1]+5,40,40),e.fillStyle="rgba(255,255, 255)",e.fillText(this.isPreview?this.amount.toString():this.item.amount.toString(),this.pos[0]+45,this.pos[1]+47.5),e.restore()}}const b=[],M=[];class A{constructor(e){this.items=e,this.page=u.current,this.itemSystem=new _(e)}render(e){for(let t=16*(u.current-1);t<16*(u.current-1)+16;t++)t<S.length&&M[t].render(e)}}A.totalPages=1;let S=[];const U=e=>S.find((t=>t.ID===e))||null,C=(e,t=1)=>{const s=S.findIndex((t=>t.ID===e.ID));if(S.length>47)return;if(s>=0)return void(S[s].amount<S[s].maxAmount&&(S[s].amount+=t));S.length%15==0&&0!==S.length&&A.totalPages++;const i=new x(b[S.length%16],e);M.push(i),S.push(e)},R=(e,t=1)=>{T();const s=S.findIndex((t=>t.ID===e.ID));s>=0&&(S[s].amount<2?S.splice(s,1):S[s].amount-=t),T()},T=()=>{for(let e=0;e<S.length;e++)M[e].item=S[e],M[e].image=S[e].image,M[e].pos=b[e]};class _{constructor(e){this.items=[],(()=>{let e=0,t=0;for(let s=0;s<16;s++)b.push([70+70*e,220+70*t]),e++,e>3&&(e=0,t++)})(),C(e.findOne(k.tool.passport))}}class L{constructor(e,t,s,i){this.ingredients=[],this.ingredients_=[],this.itemBoxs=[],this.pos=e,this.cookItem=i.findOne(s),this.ingredients_=t;for(const s in t){const{ID:o,amount:r}=t[s],h=i.findOne(o);this.ingredients.push(h),this.itemBoxs.push(new x(e,h,!0,r)),e=[e[0]+80,e[1]]}this.itemBoxs.push(new x([270,e[1]],i.findOne(s),!0,1))}render(e){for(const t in this.itemBoxs)this.itemBoxs[t].render(e);e.save(),e.fillStyle="black",e.font="25px poppins",e.fillText("+",this.pos[0]+65,this.pos[1]+35),e.restore();let t=!1;for(const e in this.ingredients_){const s=U(this.ingredients_[e].ID);if(!s||s.amount<this.ingredients_[e].amount)break;parseInt(e)===this.ingredients.length-1&&(t=!0)}if(e.fillStyle=t?"red":"grey",e.fillRect(this.pos[0]+140,this.pos[1]+15,40,19.5),e.font="14px Poppins",e.fillStyle="white",e.fillText("cook",this.pos[0]+160,this.pos[1]+30),s.mousemovePos[0]>this.pos[0]+140&&s.mousemovePos[1]>this.pos[1]+15&&s.mousemovePos[0]<this.pos[0]+180&&s.mousemovePos[1]<this.pos[1]+34.5&&t&&(e.fillStyle="rgba(0, 0, 0, 0.2)",e.fillRect(this.pos[0]+140,this.pos[1]+15,40,19.5)),s.clickPos[0]>this.pos[0]+140&&s.clickPos[1]>this.pos[1]+15&&s.clickPos[0]<this.pos[0]+180&&s.clickPos[1]<this.pos[1]+34.5&&t){for(const e in this.ingredients)R(this.ingredients[e],this.ingredients[e].amount);c.minute+=20,C(this.cookItem),T(),s.clickPos=[0,0]}}}class B{constructor(e){this.cooks=[],this.cooks.push(new L([80,210],[{ID:k.food.fish,amount:1},{ID:k.material.stick,amount:2}],k.cooked_Food.fish_Cooked,e)),this.cooks.push(new L([80,280],[{ID:k.food.fish,amount:1},{ID:k.material.stick,amount:2}],k.cooked_Food.fish_Cooked,e)),this.cooks.push(new L([80,350],[{ID:k.food.snail,amount:1},{ID:k.material.stick,amount:2}],k.cooked_Food.snail_Cooked,e)),this.cooks.push(new L([80,420],[{ID:k.food.spider,amount:1},{ID:k.material.stick,amount:3}],k.cooked_Food.spider_Cooked,e))}render(e){for(const t in this.cooks)this.cooks[t].render(e)}}const D={current:1,maxPage:4};class E extends p{constructor(e){super(),this.prevPageController=new O([163,528],"./Media/Image/UI/PrevPage.png",-1,"FIRE"),this.nextPageController=new O([235,527],"./Media/Image/UI/NextPage.png",1,"FIRE"),this.cookContent=new B(e)}render(e){super.render(e),this.prevPageController.render(e),this.nextPageController.render(e),this.cookContent.render(e),e.save(),e.fillStyle="black",e.fillText(D.current.toString(),200,532),e.restore()}}class F{constructor(t,s,i){this.pos=t,this.sleepTime=s,this.recoverAttr=i,this.image=new e("./Media/Image/UI/Sleep.png")}render(e){e.fillStyle="rgba(0, 0, 0, 0.411)",e.fillRect(this.pos[0],this.pos[1],50,50),e.drawImage(this.image.element,this.pos[0]+5,this.pos[1]+5,40,40),e.fillStyle="black",e.fillText,e.fillText(this.sleepTime/60+" hours",this.pos[0]+100,this.pos[1]+30),e.fillStyle="red",e.fillRect(this.pos[0]+200,this.pos[1]+15,40,19.5),e.font="14px Poppins",e.fillStyle="white",e.fillText("sleep",this.pos[0]+220,this.pos[1]+30),s.mousemovePos[0]>this.pos[0]+200&&s.mousemovePos[1]>this.pos[1]+15&&s.mousemovePos[0]<this.pos[0]+240&&s.mousemovePos[1]<this.pos[1]+34.5&&(e.fillStyle="rgba(0, 0, 0, 0.2)",e.fillRect(this.pos[0]+200,this.pos[1]+15,40,19.5)),s.clickPos[0]>this.pos[0]+200&&s.clickPos[1]>this.pos[1]+15&&s.clickPos[0]<this.pos[0]+240&&s.clickPos[1]<this.pos[1]+34.5&&(c.minute+=this.sleepTime,s.clickPos=[0,0])}}class G{constructor(e){this.sleeps=[],this.cooks=[],this.sleeps.push(new F([80,210],60,[10,0,0,5])),this.sleeps.push(new F([80,280],180,[10,0,0,5])),this.sleeps.push(new F([80,350],360,[10,0,0,5])),this.cooks.push(new L([80,210],[{ID:k.material.stick,amount:1},{ID:k.material.rock,amount:2}],k.tool.spear,e)),this.cooks.push(new L([80,280],[{ID:k.material.stick,amount:1},{ID:k.material.rock,amount:2}],k.tool.axe,e))}render(e){if(H.current===H.sleep)for(const t in this.sleeps)this.sleeps[t].render(e);if(H.current===H.tool)for(const t in this.cooks)this.cooks[t].render(e)}}const H={current:1,sleep:1,tool:2,maxPage:3};class j extends p{constructor(e){super(),this.prevPageController=new O([163,528],"./Media/Image/UI/PrevPage.png",-1,"TENT"),this.nextPageController=new O([235,527],"./Media/Image/UI/NextPage.png",1,"TENT"),this.sleeps=new G(e)}render(e){super.render(e),this.nextPageController.render(e),this.prevPageController.render(e),this.sleeps.render(e),e.save(),e.fillStyle="black",e.fillText(H.current.toString(),200,532),e.restore()}}const N={current:1,maxPage:10};class O{constructor(t,s,i,o){this.pos=t,this.imageURL=s,this.image=new e(s),this.amount=i,this.pageControllTarget=o}render(e){e.save(),$.current===$.none&&(s.mousemovePos[0]>this.pos[0]-this.image.element.width/2&&s.mousemovePos[1]>this.pos[1]-this.image.element.height/2&&s.mousemovePos[0]<this.pos[0]+this.image.element.width/2&&s.mousemovePos[1]<this.pos[1]+this.image.element.height/2?e.globalAlpha=.7:e.globalAlpha=1,s.clickPos[0]>this.pos[0]-this.image.element.width/2&&s.clickPos[1]>this.pos[1]-this.image.element.height/2&&s.clickPos[0]<this.pos[0]+this.image.element.width/2&&s.clickPos[1]<this.pos[1]+this.image.element.height/2&&("BAG"===this.pageControllTarget&&u.current+this.amount!=0&&u.current+this.amount!=u.maxPage&&(u.current+=this.amount),"GUIDE"===this.pageControllTarget&&N.current+this.amount!=0&&N.current+this.amount!=N.maxPage&&(N.current+=this.amount),"FIRE"===this.pageControllTarget&&D.current+this.amount!=0&&D.current+this.amount!=D.maxPage&&(D.current+=this.amount),"TENT"===this.pageControllTarget&&H.current+this.amount!=0&&H.current+this.amount!=H.maxPage&&(H.current+=this.amount),s.clickPos=[0,0])),e.drawImage(this.image.element,this.pos[0]-this.image.element.width/2,this.pos[1]-this.image.element.height/2),e.restore()}}const $={current:0,none:0,opened:1,item:new d("Coconut","./Media/Image/Items/Coconut.png",k.food.coconut,"A Coconut",!0,[0,10,20,0])};class V extends p{constructor(){super(),this.prevPageController=new O([163,528],"./Media/Image/UI/PrevPage.png",-1,"BAG"),this.nextPageController=new O([235,527],"./Media/Image/UI/NextPage.png",1,"BAG")}render(e){super.render(e),this.prevPageController.render(e),this.nextPageController.render(e),e.fillStyle="black",e.fillText(u.current.toString(),200,532)}}class q{constructor(t,s,i,o=!1,r="",h=!1,n=99,a=!1,l=99,c="none"){this.panelOpen=99,this.image=new e(i),this.imageURL=i,this.image.element.src=i,this.isHoverAble=o,this.imageHoverURL=r,this.isOpenPanelable=h,this.panelOpen=n,this.isChangeSenceAble=a,this.gotoSence=l,this.pos=[t,s],this._objectName_test=c}render(e){e.save(),($.current===$.none&&g.current===g.none||"none"!==this._objectName_test&&$.current===$.none)&&(this.isOpenPanelable?s.clickPos[0]>this.pos[0]-this.image.element.width/2&&s.clickPos[1]>this.pos[1]-this.image.element.height/2&&s.clickPos[0]<this.pos[0]+this.image.element.width/2&&s.clickPos[1]<this.pos[1]+this.image.element.height/2&&(s.clickPos=[0,0],g.current=this.panelOpen):this.isChangeSenceAble&&s.clickPos[0]>this.pos[0]-this.image.element.width/2&&s.clickPos[1]>this.pos[1]-this.image.element.height/2&&s.clickPos[0]<this.pos[0]+this.image.element.width/2&&s.clickPos[1]<this.pos[1]+this.image.element.height/2&&(s.clickPos=[0,0],i.current=this.gotoSence),this.isHoverAble&&(s.mousemovePos[0]>this.pos[0]-this.image.element.width/2&&s.mousemovePos[1]>this.pos[1]-this.image.element.height/2&&s.mousemovePos[0]<this.pos[0]+this.image.element.width/2&&s.mousemovePos[1]<this.pos[1]+this.image.element.height/2?e.globalAlpha=.7:e.globalAlpha=1)),e.drawImage(this.image.element,this.pos[0]-this.image.element.width/2,this.pos[1]-this.image.element.height/2),e.restore()}}class Y extends q{constructor(){super(364,149,"./Media/Image/UI/Guide-Icon.png",!0,void 0,!0,g.guide)}render(e){super.render(e)}}class X{constructor(){this.background=new t(0,0,"./Media/Image/Backgrounds/home.png"),this.tent=new q(80,465,"./Media/Image/SenceObjects/tent.png",!0,void 0,!0,g.tent),this.fire=new q(190,540,"./Media/Image/SenceObjects/fire.png",!0,void 0,!0,g.fire),this.bag=new q(350,445,"./Media/Image/SenceObjects/bag.png",!0,void 0,!0,g.bag),this.leaveArrow=new q(70,220,"./Media/Image/UI/Leave-Arrow.png",!0,void 0,void 0,void 0,!0,i.map)}render(e){this.background.render(e),this.fire.render(e),this.tent.render(e),this.leaveArrow.render(e),this.bag.render(e)}}class z{}z.current=1,z.home=1,z.river=3,z.jungle=4,z.waterfall=5,z.mapPos=[];class J{constructor(t,s,i=!1,o=!1,r=99,h=""){this.pos=[t[0],t[1]],this.imageURL=s,this.isHoverAble=i,this.isChangeSenceAble=o,this.gotoSence=r,this.senceName=h,this.image=new e(s),z.mapPos.push([t[0],t[1],this.senceName])}calculateCost(e,t){const s=Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2));return Math.round(s)}debug(){console.log(`${z.mapPos[z.current][2]} ${z.mapPos[z.current][0]},${z.mapPos[z.current][1]}`,`${z.mapPos[this.gotoSence][2]} ${z.mapPos[this.gotoSence][0]},${z.mapPos[this.gotoSence][1]}`,"distance = "+this.calculateCost([z.mapPos[z.current][0],z.mapPos[z.current][1]],[z.mapPos[this.gotoSence][0],z.mapPos[this.gotoSence][1]]))}render(e){if(e.save(),g.current===g.none&&(this.isHoverAble&&(s.mousemovePos[0]>this.pos[0]-this.image.element.width/2&&s.mousemovePos[1]>this.pos[1]-this.image.element.height/2&&s.mousemovePos[0]<this.pos[0]+this.image.element.width/2&&s.mousemovePos[1]<this.pos[1]+this.image.element.height/2?e.globalAlpha=.7:e.globalAlpha=1),this.isChangeSenceAble&&s.clickPos[0]>this.pos[0]-this.image.element.width/2&&s.clickPos[1]>this.pos[1]-this.image.element.height/2&&s.clickPos[0]<this.pos[0]+this.image.element.width/2&&s.clickPos[1]<this.pos[1]+this.image.element.height/2)){let e=0;s.clickPos=[0,0],z.current!==this.gotoSence&&(e=this.calculateCost([z.mapPos[z.current][0],z.mapPos[z.current][1]],[z.mapPos[this.gotoSence][0],z.mapPos[this.gotoSence][1]])/2),c.minute+=e,this.debug();const t=n.hunger-=e/15,o=n.thirsty-=e/10;n.hunger<=0?n.hunger=0:n.hunger=t,n.thirsty<=0?n.thirsty=0:n.thirsty=o,i.current=this.gotoSence,z.current=this.gotoSence}e.drawImage(this.image.element,this.pos[0]-this.image.element.width/2+4,this.pos[1]-this.image.element.height/2+2),e.restore()}}class W{constructor(){this._menu=new J([0,0],"",void 0,void 0,void 0,""),this.home=new J([172,438],"./Media/Image/MapIcon/home.png",!0,!0,i.home,"Home"),this._map=new J([0,0],""),this.river=new J([128,553],"./Media/Image/MapIcon/river.png",!0,!0,i.river,"River"),this.jungle=new J([102,245],"./Media/Image/MapIcon/jungle.png",!0,!0,i.jungle,"Jungle"),this.waterfall=new J([322,194],"./Media/Image/MapIcon/waterfall.png",!0,!0,i.waterfall,"Waterfall")}render(e){this.home.render(e),this.river.render(e),this.jungle.render(e),this.waterfall.render(e)}}class K{constructor(){this.background=new t(0,0,"./Media/Image/Backgrounds/map.png"),this.mapIcons=new W,this.redDot=new Q(100,100)}render(e){this.background.render(e),this.mapIcons.render(e),this.redDot.render(e)}}class Q{constructor(t,s){this.imageURL="./Media/Image/UI/red-dot.png",this.pos=[t,s],this.image=new e(this.imageURL)}render(e){e.drawImage(this.image.element,z.mapPos[z.current][0],z.mapPos[z.current][1])}}class Z{constructor(){this.background=new t(0,0,"./Media/Image/Backgrounds/waterfall.png"),this.leaveArrow=new q(70,220,"./Media/Image/UI/Leave-Arrow.png",!0,void 0,void 0,void 0,!0,2)}render(e){this.background.render(e),this.leaveArrow.render(e)}}class ee{constructor(){this.background=new t(0,0,"./Media/Image/Backgrounds/jungle.png"),this.leaveArrow=new q(70,220,"./Media/Image/UI/Leave-Arrow.png",!0,void 0,void 0,void 0,!0,2)}render(e){this.background.render(e),this.leaveArrow.render(e)}}class te{constructor(){this.background=new t(0,0,"./Media/Image/Backgrounds/river.png"),this.leaveArrow=new q(70,220,"./Media/Image/UI/Leave-Arrow.png",!0,void 0,void 0,void 0,!0,2)}render(e){this.background.render(e),this.leaveArrow.render(e)}}class se{constructor(e,t,s=["16px","black"]){this.text=t,this.pos=e,this.fontSize=s[0],this.color=s[1]}fillText(e){e.save(),e.font=`500 ${this.fontSize} cursive__`,e.fillStyle=this.color,e.fillText(this.text,this.pos[0],this.pos[1]),e.restore()}}const ie=[112,233];class oe{constructor(e){this.article=[],this.articlePos=[[40,266]],this.calArticlePos(),this.title=new se(ie,e,["20px","black"]),this.article.push(new se(this.articlePos[0],"1. Don't starve.")),this.article.push(new se(this.articlePos[1],"2. Consume drinkable")),this.article.push(new se(this.articlePos[2],"liquid.")),this.article.push(new se(this.articlePos[3],"3. Don't put anything.")),this.article.push(new se(this.articlePos[4],"in your mouth.")),this.article.push(new se(this.articlePos[5],"3. Don't get sick.")),this.article.push(new se(this.articlePos[6],"4. Stay positive.")),this.article.push(new se(this.articlePos[7],"5. Aware of Beast.")),this.article.push(new se(this.articlePos[8],"6. Can't Go out of your")),this.article.push(new se(this.articlePos[9],"camp at night.")),this.article.push(new se([this.articlePos[10][0],this.articlePos[10][1]],"Important!",["20px","red"])),this.article.push(new se([this.articlePos[11][0]+15,this.articlePos[11][1]],"Don't Die!",["22px","red"]))}calArticlePos(){for(let e=0;e<4;e++)this.articlePos.push([this.articlePos[e][0],this.articlePos[e][1]+30]);this.articlePos.push([this.articlePos[4][0]+180,236]);for(let e=5;e<11;e++)this.articlePos.push([this.articlePos[e][0],this.articlePos[e][1]+30])}render(e){this.title.fillText(e);for(const t in this.article)e.save(),e.textAlign="left",this.article[t].fillText(e),e.restore()}}class re{constructor(e){this.article=[],this.articlePos=[[40,270]],this.calArticlePos(),this.title=new se(ie,e,["20px","black"]),this.healthIcon=new r(112,262,"./Media/Image/UI/Attr/health.png",!0,"./Media/Image/UI/Attr/health-hover.png"),this.article.push(new se(this.articlePos[1],"Most important",["16px","red"])),this.article.push(new se(this.articlePos[2],"Attribute, If this")),this.article.push(new se(this.articlePos[3],"attribute value goes")),this.article.push(new se(this.articlePos[4],"0, Game will be over.")),this.article.push(new se(this.articlePos[5],"If you get some")),this.article.push(new se(this.articlePos[6],"illness, health value")),this.article.push(new se(this.articlePos[7],"will decrease slowly")),this.article.push(new se(this.articlePos[8],"or rapidly, depends")),this.article.push(new se(this.articlePos[9],"on what illness you")),this.article.push(new se(this.articlePos[10],"get."))}calArticlePos(){for(let e=0;e<4;e++)this.articlePos.push([this.articlePos[e][0],this.articlePos[e][1]+30]);this.articlePos.push([this.articlePos[4][0]+180,236]);for(let e=5;e<11;e++)this.articlePos.push([this.articlePos[e][0],this.articlePos[e][1]+30])}render(e){this.title.fillText(e),e.save(),e.fillStyle="black",e.fillRect(94,244,35,35),e.restore(),this.healthIcon.render(e);for(const t in this.article)e.save(),e.textAlign="left",this.article[t].fillText(e),e.restore()}}class he{constructor(e){this.article=[],this.articlePos=[[40,270]],this.calArticlePos(),this.title=new se(ie,e,["20px","black"]),this.hungerIcon=new r(112,262,"./Media/Image/UI/Attr/hunger.png",!0,"./Media/Image/UI/Attr/hunger-hover.png"),this.article.push(new se(this.articlePos[2],"Starving can make")),this.article.push(new se(this.articlePos[3],"mentality and health")),this.article.push(new se(this.articlePos[4],"value decrease,")),this.article.push(new se(this.articlePos[5],"even get sick.")),this.article.push(new se(this.articlePos[6],"No matter how hungry ")),this.article.push(new se(this.articlePos[7],"you are, don't eat")),this.article.push(new se(this.articlePos[8],"unknown things in")),this.article.push(new se(this.articlePos[9],"the rainforest."))}calArticlePos(){for(let e=0;e<4;e++)this.articlePos.push([this.articlePos[e][0],this.articlePos[e][1]+30]);this.articlePos.push([this.articlePos[4][0]+180,236]);for(let e=5;e<11;e++)this.articlePos.push([this.articlePos[e][0],this.articlePos[e][1]+30])}render(e){this.title.fillText(e),e.save(),e.fillStyle="black",e.fillRect(94,244,35,35),e.restore(),this.hungerIcon.render(e);for(const t in this.article)e.save(),e.textAlign="left",this.article[t].fillText(e),e.restore()}}class ne{constructor(e){this.article=[],this.articlePos=[[40,270]],this.calArticlePos(),this.title=new se(ie,e,["20px","black"]),this.thirstyIcon=new r(289,373,"./Media/Image/UI/Attr/thirsty-hover.png",!1),this.article.push(new se(this.articlePos[0],"The worst thing is")),this.article.push(new se(this.articlePos[1],"don't have any thing")),this.article.push(new se(this.articlePos[2],"can drink, If you ")),this.article.push(new se(this.articlePos[3],"starve , that's fine ,")),this.article.push(new se(this.articlePos[4],"but get thirsty,It ")),this.article.push(new se(this.articlePos[5],"can kill you in 3")),this.article.push(new se(this.articlePos[6],"days. So keep liquid")),this.article.push(new se(this.articlePos[7],"sufficient is ")),this.article.push(new se(this.articlePos[8],"important",["24px","red"]))}calArticlePos(){for(let e=0;e<4;e++)this.articlePos.push([this.articlePos[e][0],this.articlePos[e][1]+30]);this.articlePos.push([this.articlePos[4][0]+180,236]);for(let e=5;e<11;e++)this.articlePos.push([this.articlePos[e][0],this.articlePos[e][1]+30])}render(e){this.title.fillText(e),this.thirstyIcon.render(e);for(const t in this.article)e.save(),e.textAlign="left",this.article[t].fillText(e),e.restore()}}class ae{constructor(e){this.article=[],this.articlePos=[[40,270]],this.calArticlePos(),this.title=new se(ie,e,["20px","black"]),this.mentalIcon=new r(289,373,"./Media/Image/UI/Attr/mentality-hover.png",!1),this.article.push(new se(this.articlePos[0],"A person who tries")),this.article.push(new se(this.articlePos[1],"to surivie in the")),this.article.push(new se(this.articlePos[2],"rainforest, keep")),this.article.push(new se(this.articlePos[3],"positive can make")),this.article.push(new se(this.articlePos[4],"things more easier.")),this.article.push(new se(this.articlePos[5],"If your mentality")),this.article.push(new se(this.articlePos[6],"value is low")),this.article.push(new se(this.articlePos[7],"other attrbuite will")),this.article.push(new se(this.articlePos[8],"decrease faster"))}calArticlePos(){for(let e=0;e<4;e++)this.articlePos.push([this.articlePos[e][0],this.articlePos[e][1]+30]);this.articlePos.push([this.articlePos[4][0]+180,236]);for(let e=5;e<11;e++)this.articlePos.push([this.articlePos[e][0],this.articlePos[e][1]+30])}render(e){this.title.fillText(e),this.mentalIcon.render(e);for(const t in this.article)e.save(),e.textAlign="left",this.article[t].fillText(e),e.restore()}}class le{constructor(t){this.article=[],this.articlePos=[[40,266]],this.mapIcon=[],this.calArticlePos(),this.title=new se(ie,t,["20px","black"]),this.article.push(new se(this.articlePos[0],"You can visit every")),this.article.push(new se(this.articlePos[1],"spot on the map ,")),this.article.push(new se(this.articlePos[2],"BUT CARE FOR ---")),this.article.push(new se(this.articlePos[3],"It takes TIME and")),this.article.push(new se(this.articlePos[4],"ENERGY to TRVEAL!!")),this.article.push(new se(this.articlePos[6],"HOME  RIVER",["20px","red"])),this.article.push(new se(this.articlePos[8],"JUNGLE  FALL",["20px","red"])),this.mapIcon.push(new e("./Media/Image/MapIcon/home.png")),this.mapIcon.push(new e("./Media/Image/MapIcon/river.png")),this.mapIcon.push(new e("./Media/Image/MapIcon/jungle.png")),this.mapIcon.push(new e("./Media/Image/MapIcon/waterfall.png"))}calArticlePos(){for(let e=0;e<4;e++)this.articlePos.push([this.articlePos[e][0],this.articlePos[e][1]+30]);this.articlePos.push([this.articlePos[4][0]+180,236]);for(let e=5;e<11;e++)this.articlePos.push([this.articlePos[e][0],this.articlePos[e][1]+30])}render(e){this.title.fillText(e);for(const t in this.article)e.save(),e.textAlign="left",this.article[t].fillText(e),e.restore();e.drawImage(this.mapIcon[0].element,232,267),e.drawImage(this.mapIcon[1].element,315,267),e.drawImage(this.mapIcon[2].element,240,335),e.drawImage(this.mapIcon[3].element,332,335)}}class ce{constructor(e){this.article=[],this.articlePos=[[40,266]],this.calArticlePos(),this.title=new se(ie,e,["20px","black"]),this.article.push(new se(this.articlePos[0],"test test"))}calArticlePos(){for(let e=0;e<4;e++)this.articlePos.push([this.articlePos[e][0],this.articlePos[e][1]+30]);this.articlePos.push([this.articlePos[4][0]+180,236]);for(let e=5;e<11;e++)this.articlePos.push([this.articlePos[e][0],this.articlePos[e][1]+30])}render(e){this.title.fillText(e);for(const t in this.article)e.save(),e.textAlign="left",this.article[t].fillText(e),e.restore()}}class me{constructor(){this.pages=[],this.pages.push(new oe("How to survive")),this.pages.push(new re("Health")),this.pages.push(new he("Hunger")),this.pages.push(new ne("Thirsty")),this.pages.push(new ae("Mentality")),this.pages.push(new le("Map")),this.pages.push(new ce("Misson"))}render(e){this.pages[N.current-1].render(e)}}class ge extends p{constructor(){super([10,200],"./Media/Image/UI/Guide-Panel.png",[373,225]),this.prevPageController=new O([40,415],"./Media/Image/UI/GuidePrevPage.png",-1,"GUIDE"),this.nextPageController=new O([370,413],"./Media/Image/UI/GuideNextPage.png",1,"GUIDE"),this.pages=new me}render(e){super.render(e),1!==N.current&&this.prevPageController.render(e),this.nextPageController.render(e),e.fillStyle="black",e.font="16px cursive__",e.fillText(`${N.current.toString()}.`,28,230),this.pages.render(e)}}class pe{constructor(t,s){this.pos=t,this.image=new e(s),this.imageURL=s}render(e){e.save(),s.mousemovePos[0]>this.pos[0]-this.image.element.width/2&&s.mousemovePos[1]>this.pos[1]-this.image.element.height/2&&s.mousemovePos[0]<this.pos[0]+this.image.element.width/2&&s.mousemovePos[1]<this.pos[1]+this.image.element.height/2?e.globalAlpha=.7:e.globalAlpha=1,s.clickPos[0]>this.pos[0]-this.image.element.width/2&&s.clickPos[1]>this.pos[1]-this.image.element.height/2&&s.clickPos[0]<this.pos[0]+this.image.element.width/2&&s.clickPos[1]<this.pos[1]+this.image.element.height/2&&(s.clickPos=[0,0],$.current=$.none),e.drawImage(this.image.element,this.pos[0]-this.image.element.width/2,this.pos[1]-this.image.element.height/2),e.restore()}}class ue{constructor(e=!1){this.image=$.item.image,this.isPreview=e,this.xButton=new pe([295,243],"./Media/Image/UI/x.png")}render(e){e.fillStyle="rgba(0, 0, 0, 0.8)",e.fillRect(85,220,230,270),e.drawImage($.item.image.element,120,250,150,150),e.fillStyle="white",e.fillText($.item.text,198,432),e.fillText($.item.name,197,239),this.isPreview||(e.fillStyle=!0===$.item.consumable?"green":"grey",e.fillRect(156,457,40,20),e.fillStyle="red",e.fillRect(206,457.5,40,19.5),e.font="14px Poppins",e.fillStyle="white",e.fillText("eat",176,472),e.fillText("drop",226,472),s.mousemovePos[0]>156&&s.mousemovePos[1]>457&&s.mousemovePos[0]<196&&s.mousemovePos[1]<477&&!0===$.item.consumable&&(e.fillStyle="rgba(0, 0, 0, 0.2)",e.fillRect(156,457,40,20)),s.clickPos[0]>156&&s.clickPos[1]>457&&s.clickPos[0]<196&&s.clickPos[1]<477&&!0===$.item.consumable&&(R($.item),this.recoverAttr(),T(),$.current=$.none),s.mousemovePos[0]>206&&s.mousemovePos[1]>457.5&&s.mousemovePos[0]<246&&s.mousemovePos[1]<477.5&&(e.fillStyle="rgba(0, 0, 0, 0.4)",e.fillRect(206,457.5,40,20)),s.clickPos[0]>206&&s.clickPos[1]>457.5&&s.clickPos[0]<246&&s.clickPos[1]<477.5&&(R($.item),T(),$.current=$.none)),this.xButton.render(e)}recoverAttr(){const e=[n.health+=$.item.attrValue[0]*n.mentalityRate,n.hunger+=$.item.attrValue[1]*n.mentalityRate,n.thirsty+=$.item.attrValue[2]*n.mentalityRate,n.mentality+=$.item.attrValue[3]*n.mentalityRate];e[0]>=100?n.health=100:n.health+=$.item.attrValue[0]*n.mentalityRate,e[1]>=100?n.hunger=100:n.hunger+=$.item.attrValue[1]*n.mentalityRate,e[2]>=100?n.thirsty=100:n.thirsty+=$.item.attrValue[2]*n.mentalityRate,e[3]>=100?n.mentality=100:n.mentality+=$.item.attrValue[3]*n.mentalityRate}}class de{constructor(t,s,i){this.pos=t,this.lableTag=new e(s),this.imageURL=s,this.image=new e("./Media/Image/UI/Lable.png"),this.pageTarget=i}render(e){e.drawImage(this.image.element,this.pos[0],this.pos[1]),e.drawImage(this.lableTag.element,this.pos[0]+7,this.pos[1]+8,20,20),s.mousemovePos[0]>this.pos[0]+16-this.image.element.width/2&&s.mousemovePos[1]>this.pos[1]+18-this.image.element.height/2&&s.mousemovePos[0]<this.pos[0]+14+this.image.element.width/2&&s.mousemovePos[1]<this.pos[1]+16+this.image.element.height/2?this.pos[1]<432&&(this.pos[1]+=1):this.pos[1]>425&&(this.pos[1]-=1),s.clickPos[0]>this.pos[0]+16-this.image.element.width/2&&s.clickPos[1]>this.pos[1]+18-this.image.element.height/2&&s.clickPos[0]<this.pos[0]+14+this.image.element.width/2&&s.clickPos[1]<this.pos[1]+16+this.image.element.height/2&&(s.clickPos=[0,0],N.current=this.pageTarget)}}class Pe{constructor(){this.attrLable=new de([43,425],"./Media/Image/UI/Attr/health-hover.png",2),this.mapLable=new de([78,425],"./Media/Image/MapIcon/home.png",6),this.missonLable=new de([113,425],"./Media/Image/UI/exclamation_mark.png",7)}render(e){this.attrLable.render(e),this.mapLable.render(e),this.missonLable.render(e)}}class we{constructor(e){this.bagitemInfo=new ue(!1),this.fireitemInfo=new ue(!0),this.lables=new Pe,this.fire=new E(e),this.guide=new ge,this.bag=new V,this.tent=new j(e),this.itemBoxs=new A(e)}render(e){g.current===g.guide&&(this.lables.render(e),this.guide.render(e)),g.current===g.fire&&(this.fire.render(e),$.current===$.opened&&this.fireitemInfo.render(e)),g.current===g.tent&&(this.tent.render(e),$.current===$.opened&&this.fireitemInfo.render(e)),g.current===g.bag&&(this.bag.render(e),this.itemBoxs.render(e),$.current===$.opened&&this.bagitemInfo.render(e))}}class fe{constructor(){this.attrs=new l,this.timer=new m,this.guide=new Y,this.items=new y,this.panels=new we(this.items),this.menu=new h,this.home=new X,this.map=new K,this.river=new te,this.jungle=new ee,this.waterfall=new Z}render(e){i.current===i.menu&&this.menu.render(e),i.current===i.home&&this.home.render(e),i.current===i.map&&this.map.render(e),i.current===i.river&&this.river.render(e),i.current===i.jungle&&this.jungle.render(e),i.current===i.waterfall&&this.waterfall.render(e),i.current!==i.menu&&(this.attrs.render(e),this.timer.render(e),this.guide.render(e),this.panels.render(e))}}class Ie{}Ie.styleCursor="default";let ve=0;const ke=document.getElementById("gameCanvas"),ye=ke.getContext("2d");Ie.width=ke.width,Ie.height=ke.height;const xe=new s;xe.clickListener(ke),xe.mouseoverListener(ke);const be=new class{constructor(){this.Sences=new fe}render(e){this.Sences.render(e)}},Me=new class{constructor(){this.fps=0,this.times=[]}render(e){const t=performance.now();for(;this.times.length>0&&this.times[0]<=t-1e3;)this.times.shift();this.times.push(t),this.fps=this.times.length,e.textAlign="center",e.font="20px Poppins",e.fillStyle="#F3FF0F",e.fillText(this.fps.toString(),20,20)}},Ae=(new class{constructor(){this.items=new y,this.btn=document.getElementById("btn"),this.ID=document.getElementById("itemId"),this.itemBtn=document.getElementById("itembtn"),this.amount=document.getElementById("itemAmount"),this.btn.onclick=()=>{const e=parseInt(this.ID.value),t=parseInt(this.amount.value),s=this.items.items.find((t=>t.ID===e));C(s,t),T()},this.itemBtn.onclick=()=>{console.table(S),console.table(this.items.items)}}},()=>{be.render(ye),Me.render(ye),requestAnimationFrame(Ae)});setInterval((()=>{c.minute%1440==0&&c.day++,o.current===o.inGame&&(ve++,n.hunger<=0&&(n.hunger=0),n.thirsty<=0&&(n.thirsty=0),n.health<=0&&(n.health=0),n.mentality<=0&&(n.mentality=0),ve%3==0&&n.health>0&&((n.hunger<50&&n.hunger>=25||n.thirsty<60&&n.thirsty>=40)&&(n.health-=.5),(n.hunger<25&&n.hunger>=5||n.thirsty<40&&n.thirsty>=10)&&(n.health-=1),(n.hunger<5||n.thirsty<10)&&(n.health-=5)),n.mentality>0&&(n.mentality<60&&(n.mentalityRate=.8),n.mentality<25&&n.mentality>=60&&(n.mentalityRate=.6)),n.hunger>0&&5===ve&&(n.hunger-=1),n.mentality>0&&6===ve&&((n.hunger<50&&n.hunger>=25||n.thirsty<60&&n.thirsty>=40)&&(n.mentality-=1),(n.hunger<25||n.thirsty<40)&&(n.mentality-=1.5)),n.thirsty>0&&6===ve&&(n.thirsty-=1),8===ve&&(ve=0),c.minute++)}),500),Ae()})();