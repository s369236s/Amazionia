(()=>{"use strict";class e{constructor(e){this.element=new Image,this.element.src=e}}class t{constructor(t,i,s){this.image=new e(s),this.pos=[t,i]}render(e){e.drawImage(this.image.element,this.pos[0],this.pos[1])}}class i{constructor(){i.clickPos=[0,0],i.mousemovePos=[0,0]}clickListener(e){e.addEventListener("click",(t=>{i.clickPos[0]=t.clientX-e.getBoundingClientRect().left,i.clickPos[1]=t.clientY-e.getBoundingClientRect().top;const[s,n]=i.clickPos;console.log(Math.floor(s),Math.floor(n))}))}mouseoverListener(e){e.addEventListener("mousemove",(t=>{i.mousemovePos[0]=t.clientX-e.getBoundingClientRect().left,i.mousemovePos[1]=t.clientY-e.getBoundingClientRect().top}))}}class s{}s.current=0,s.menu=0,s.home=1,s.map=2,s.river=3,s.jungle=4,s.waterfall=5;class n{constructor(t,i,s,n=!1,h="",r=!1,o=99){this.image=new e(s),this.imageURL=s,this.image.element.src=s,this.isHoverAble=n,this.isChangeSenceAble=r,this.gotoSence=o,this.imageHoverURL=h,this.pos=[t,i]}render(e){e.drawImage(this.image.element,this.pos[0]-this.image.element.width/2,this.pos[1]-this.image.element.height/2),this.isHoverAble&&(i.mousemovePos[0]>this.pos[0]-this.image.element.width/2&&i.mousemovePos[1]>this.pos[1]-this.image.element.height/2&&i.mousemovePos[0]<this.pos[0]+this.image.element.width/2&&i.mousemovePos[1]<this.pos[1]+this.image.element.height/2?this.image.element.src=this.imageHoverURL:this.image.element.src=this.imageURL),this.isChangeSenceAble&&i.clickPos[0]>this.pos[0]-this.image.element.width/2&&i.clickPos[1]>this.pos[1]-this.image.element.height/2&&i.clickPos[0]<this.pos[0]+this.image.element.width/2&&i.clickPos[1]<this.pos[1]+this.image.element.height/2&&(s.current=this.gotoSence)}}class h{constructor(){this.background=new t(0,0,"./Media/Image/Backgrounds/menu.png"),this.startButton=new n(k.width/2,k.height/2,"./Media/Image/UI/Button/New-Game-Button.png",!0,"./Media/Image/UI/Button/New-Game-Button-Hover.png",!0,1)}render(e){this.background.render(e),this.startButton.render(e)}}class r{constructor(t,i,s,n,h,r){this.pos=[t,i],this.imageURL=s,this.attrValue=n,this.isHoverAble=h,this.imageHoverURL=r,this.image=new e(s)}render(e){e.drawImage(this.image.element,this.pos[0]-this.image.element.width/2,this.pos[1]-this.image.element.height/2),e.fillStyle="white",e.font="16px Poppins",e.textAlign="center",e.fillText(this.attrValue.toString(),this.image.element.width+this.pos[0]-this.image.element.width/2+15,60),this.isHoverAble&&(i.mousemovePos[0]>this.pos[0]-this.image.element.width/2&&i.mousemovePos[1]>this.pos[1]-this.image.element.height/2&&i.mousemovePos[0]<this.pos[0]+this.image.element.width/2&&i.mousemovePos[1]<this.pos[1]+this.image.element.height/2?this.image.element.src=this.imageHoverURL:this.image.element.src=this.imageURL)}}class o{constructor(){this.health=new r(30,60,"./Media/Image/UI/Attr/health.png",100,!0,"./Media/Image/UI/Attr/health-hover.png"),this.hunger=new r(100,60,"./Media/Image/UI/Attr/hunger.png",100,!0,"./Media/Image/UI/Attr/hunger-hover.png"),this.thirsty=new r(170,60,"./Media/Image/UI/Attr/thirsty.png",100,!0,"./Media/Image/UI/Attr/thirsty-hover.png"),this.mentality=new r(240,60,"./Media/Image/UI/Attr/mentality.png",100,!0,"./Media/Image/UI/Attr/mentality-hover.png")}render(e){this.health.render(e),this.hunger.render(e),this.thirsty.render(e),this.mentality.render(e)}}class a{}a.minute=770;class m{constructor(){this.pos=[0,0],this.hour=Math.floor(a.minute%525600%1440/60),this.minute=Math.floor(a.minute%525600%1440%60/24)}secondsToString(e){return this.hour=Math.floor(e%525600%1440/60),this.minute=Math.floor(e%525600%1440%60),`${this.hour<10?`0${this.hour.toString()}`:this.hour.toString()}:${this.minute<10?`0${this.minute.toString()}`:this.minute.toString()} `}render(e){e.fillStyle="#47defc",e.font="600 30px digital",e.textAlign="center",e.fillText(this.secondsToString(a.minute),340,70)}}class g{constructor(t,i,s,n=!1,h="",r=!1,o=99,a=!1,m=99){this.panelOpen=99,this.image=new e(s),this.imageURl=s,this.image.element.src=s,this.isHoverAble=n,this.imageHoverURL=h,this.isOpenPanelable=r,this.panelOpen=o,this.isChangeSenceAble=a,this.gotoSence=m,this.pos=[t,i]}render(e){e.save(),this.isOpenPanelable||this.isChangeSenceAble&&i.clickPos[0]>this.pos[0]-this.image.element.width/2&&i.clickPos[1]>this.pos[1]-this.image.element.height/2&&i.clickPos[0]<this.pos[0]+this.image.element.width/2&&i.clickPos[1]<this.pos[1]+this.image.element.height/2&&(i.clickPos=[0,0],s.current=this.gotoSence),this.isHoverAble&&(i.mousemovePos[0]>this.pos[0]-this.image.element.width/2&&i.mousemovePos[1]>this.pos[1]-this.image.element.height/2&&i.mousemovePos[0]<this.pos[0]+this.image.element.width/2&&i.mousemovePos[1]<this.pos[1]+this.image.element.height/2?e.globalAlpha=.7:e.globalAlpha=1),e.drawImage(this.image.element,this.pos[0]-this.image.element.width/2,this.pos[1]-this.image.element.height/2),e.restore()}}class l{constructor(){this.background=new t(0,0,"./Media/Image/Backgrounds/home.png"),this.tent=new g(80,465,"./Media/Image/SenceObjects/tent.png",!0),this.fire=new g(190,540,"./Media/Image/SenceObjects/fire.png",!0),this.bag=new g(350,445,"./Media/Image/SenceObjects/bag.png",!0),this.leaveArrow=new g(70,220,"./Media/Image/UI/Leave-Arrow.png",!0,void 0,void 0,void 0,!0,2)}render(e){this.background.render(e),this.fire.render(e),this.tent.render(e),this.leaveArrow.render(e),this.bag.render(e)}}class c{}c.current=1,c.home=1,c.river=3,c.jungle=4,c.waterfall=5,c.mapPos=[];class d{constructor(t,i,s,n=!1,h=!1,r=99){this.pos=[t,i],this.imageURL=s,this.isHoverAble=n,this.isChangeSenceAble=h,this.gotoSence=r,this.image=new e(s),c.mapPos.push([t,i])}render(e){e.save(),this.isHoverAble&&(i.mousemovePos[0]>this.pos[0]-this.image.element.width/2&&i.mousemovePos[1]>this.pos[1]-this.image.element.height/2&&i.mousemovePos[0]<this.pos[0]+this.image.element.width/2&&i.mousemovePos[1]<this.pos[1]+this.image.element.height/2?e.globalAlpha=.7:e.globalAlpha=1),this.isChangeSenceAble&&i.clickPos[0]>this.pos[0]-this.image.element.width/2&&i.clickPos[1]>this.pos[1]-this.image.element.height/2&&i.clickPos[0]<this.pos[0]+this.image.element.width/2&&i.clickPos[1]<this.pos[1]+this.image.element.height/2&&(i.clickPos=[0,0],s.current=this.gotoSence,c.current=this.gotoSence),e.drawImage(this.image.element,this.pos[0]-this.image.element.width/2+4,this.pos[1]-this.image.element.height/2+2),e.restore()}}class u{constructor(){this._menu=new d(0,0,""),this.home=new d(172,438,"./Media/Image/MapIcon/home.png",!0,!0,1),this._map=new d(0,0,""),this.river=new d(128,553,"./Media/Image/MapIcon/river.png",!0,!0,3),this.jungle=new d(102,245,"./Media/Image/MapIcon/jungle.png",!0,!0,4),this.waterfall=new d(326,162,"./Media/Image/MapIcon/waterfall.png",!0,!0,5)}render(e){this.home.render(e),this.river.render(e),this.jungle.render(e),this.waterfall.render(e)}}class p{constructor(){this.background=new t(0,0,"./Media/Image/Backgrounds/Map.png"),this.mapIcons=new u,this.redDot=new w(100,100)}render(e){this.background.render(e),this.mapIcons.render(e),this.redDot.render(e)}}class w{constructor(t,i){this.pos=[t,i],this.image=new e("./Media/Image/UI/red-dot.png")}render(e){e.drawImage(this.image.element,c.mapPos[c.current][0],c.mapPos[c.current][1])}}class v{constructor(){this.background=new t(0,0,"./Media/Image/Backgrounds/waterfall.png"),this.leaveArrow=new g(70,220,"./Media/Image/UI/Leave-Arrow.png",!0,void 0,void 0,void 0,!0,2)}render(e){this.background.render(e),this.leaveArrow.render(e)}}class I{constructor(){this.background=new t(0,0,"./Media/Image/Backgrounds/jungle.png"),this.leaveArrow=new g(70,220,"./Media/Image/UI/Leave-Arrow.png",!0,void 0,void 0,void 0,!0,2)}render(e){this.background.render(e),this.leaveArrow.render(e)}}class P{constructor(){this.background=new t(0,0,"./Media/Image/Backgrounds/river.png"),this.leaveArrow=new g(70,220,"./Media/Image/UI/Leave-Arrow.png",!0,void 0,void 0,void 0,!0,2)}render(e){this.background.render(e),this.leaveArrow.render(e)}}class A{constructor(){this.attrs=new o,this.timer=new m,this.menu=new h,this.home=new l,this.map=new p,this.river=new P,this.jungle=new I,this.waterfall=new v}render(e){s.current===s.menu&&this.menu.render(e),s.current===s.home&&this.home.render(e),s.current===s.map&&this.map.render(e),s.current===s.river&&this.river.render(e),s.current===s.jungle&&this.jungle.render(e),s.current===s.waterfall&&this.waterfall.render(e),s.current!==s.menu&&(this.attrs.render(e),this.timer.render(e))}}class k{}k.styleCursor="default";const M=document.getElementById("gameCanvas"),b=M.getContext("2d");k.width=M.width,k.height=M.height;const f=new i;f.clickListener(M),f.mouseoverListener(M);const S=new class{constructor(){this.Sences=new A}render(e){this.Sences.render(e)}},U=new class{constructor(){this.fps=0,this.times=[]}render(e){const t=performance.now();for(;this.times.length>0&&this.times[0]<=t-1e3;)this.times.shift();this.times.push(t),this.fps=this.times.length,e.textAlign="center",e.font="20px Poppins",e.fillStyle="#F3FF0F",e.fillText(this.fps.toString(),20,20)}},L=()=>{S.render(b),U.render(b),requestAnimationFrame(L)};setInterval((()=>{a.minute+=1}),500),L()})();